<section id="contact" class="contact section">
  <div class="contact__glow contact__glow--right"></div>
  <div class="contact__glow contact__glow--left"></div>

  <div class="container">
    <div class="contact__grid">
      <div class="contact__intro stack stack--lg" animation="left">
        <span class="section-header__eyebrow">Contato</span>
        <h2 class="section-header__title">
          Vamos entender seu <span class="gradient-text">cenário?</span>
        </h2>
        <p class="section-header__subtitle">
          Envie seus dados e eu retorno com um diagnóstico rápido e uma demo focada no que você
          precisa.
        </p>

        <div class="contact__info">
          <div class="contact-info">
            <div class="contact-info__icon contact-info__icon--blue">
              <img src="/icons/clock-white.svg" alt="" />
            </div>
            <div class="stack stack--xs">
              <p class="contact-info__title">Resposta em até 1 dia útil</p>
              <p class="contact-info__text">Não deixamos você esperando</p>
            </div>
          </div>
          <div class="contact-info">
            <div class="contact-info__icon contact-info__icon--green">
              <img src="/icons/rocket-white.svg" alt="" />
            </div>
            <div class="stack stack--xs">
              <p class="contact-info__title">Implantação guiada</p>
              <p class="contact-info__text">Do diagnóstico ao go-live</p>
            </div>
          </div>
        </div>

        <div class="contact__actions">
          <a
            href="https://wa.me/5511984681559?text=Ol%C3%A1%2C%20gostaria%20de%20saber%20mais!"
            target="_blank"
            rel="noopener noreferrer"
            class="contact__action contact__action--whatsapp"
          >
            <img src="/icons/message-square-white.svg" alt="" />
            WhatsApp
          </a>
          <a href="mailto:contato@ufind.app.br" class="contact__action contact__action--email">
            <img src="/icons/mail-foreground.svg" alt="" />
            contato@ufind.app.br
          </a>
        </div>
      </div>

      <div animation="right">
        <div class="contact__panel" [class.is-loading]="form().submitting()">
          <div class="contact__panel-accent"></div>

          @if (isSubmitted()) {
            <div class="contact__success stack stack--sm">
              <div class="contact__success-icon">
                <img src="/icons/check-circle-white.svg" alt="" />
              </div>
              <h3 class="contact__success-title">Mensagem enviada!</h3>
              <p class="contact__success-text">Entraremos em contato em breve.</p>
            </div>
          } @else {
            <form class="contact__form" (submit)="handleSubmit($event)">
              <div class="contact__form-title">
                <img src="/icons/sparkles-primary.svg" alt="" class="contact__form-icon" />
                <span>Solicite seu diagnóstico gratuito</span>
              </div>
              <div class="form-grid">
                <div
                  class="form-field"
                  [class.form-field--invalid]="form.name().touched() && form.name().invalid()"
                >
                  <label for="name">Nome *</label>
                  <input
                    id="name"
                    placeholder="Seu nome"
                    [formField]="form.name"
                    [attr.aria-invalid]="form.name().invalid() ? 'true' : 'false'"
                  />
                  @if (form.name().touched() && form.name().invalid()) {
                    <span class="form-field__error">
                      {{ form.name().errors()[0]?.message || 'Campo invalido.' }}
                    </span>
                  }
                </div>
                <div
                  class="form-field"
                  [class.form-field--invalid]="form.company().touched() && form.company().invalid()"
                >
                  <label for="company">Empresa *</label>
                  <input
                    id="company"
                    placeholder="Nome da empresa"
                    [formField]="form.company"
                    [attr.aria-invalid]="form.company().invalid() ? 'true' : 'false'"
                  />
                  @if (form.company().touched() && form.company().invalid()) {
                    <span class="form-field__error">
                      {{ form.company().errors()[0]?.message || 'Campo invalido.' }}
                    </span>
                  }
                </div>
              </div>
              <div class="form-grid">
                <div
                  class="form-field"
                  [class.form-field--invalid]="form.email().touched() && form.email().invalid()"
                >
                  <label for="email">E-mail *</label>
                  <input
                    id="email"
                    type="email"
                    placeholder="seu@email.com"
                    [formField]="form.email"
                    (input)="handleEmailInput($event)"
                    [attr.aria-invalid]="form.email().invalid() ? 'true' : 'false'"
                  />
                  @if (form.email().touched() && form.email().invalid()) {
                    <span class="form-field__error">
                      {{ form.email().errors()[0]?.message || 'Campo invalido.' }}
                    </span>
                  }
                </div>
                <div
                  class="form-field"
                  [class.form-field--invalid]="form.phone().touched() && form.phone().invalid()"
                >
                  <label for="phone">Telefone / WhatsApp *</label>
                  <input
                    id="phone"
                    type="tel"
                    placeholder="(11) 99999-9999"
                    [formField]="form.phone"
                    (input)="handlePhoneInput($event)"
                    [attr.aria-invalid]="form.phone().invalid() ? 'true' : 'false'"
                  />
                  @if (form.phone().touched() && form.phone().invalid()) {
                    <span class="form-field__error">
                      {{ form.phone().errors()[0]?.message || 'Campo invalido.' }}
                    </span>
                  }
                </div>
              </div>
              <div class="form-field">
                <label for="objective">Objetivo principal</label>
                <div class="select">
                  <button
                    id="objective"
                    type="button"
                    class="select__trigger"
                    (click)="toggleObjective($event)"
                    [attr.aria-expanded]="isObjectiveOpen()"
                  >
                    <span>
                      {{ form.objective().value() || 'Selecione um objetivo' }}
                    </span>
                    <img src="/icons/chevron-down-foreground.svg" alt="" class="select__chevron" />
                  </button>
                  @if (isObjectiveOpen()) {
                    <div class="select__content">
                      @for (objective of objectives; track $index) {
                        <button
                          type="button"
                          class="select__item"
                          (click)="selectObjective(objective, $event)"
                        >
                          {{ objective }}
                        </button>
                      }
                    </div>
                  }
                </div>
              </div>
              <div class="form-field">
                <label for="message">Mensagem (opcional)</label>
                <textarea
                  id="message"
                  rows="4"
                  placeholder="Conte um pouco sobre seu cenário atual..."
                  [formField]="form.message"
                ></textarea>
              </div>
              <button
                type="submit"
                class="button button--primary button--full button--large"
                [disabled]="form().submitting()"
              >
                @if (form().submitting()) {
                  <span class="button__loading">Enviando...</span>
                }
                @if (!form().submitting()) {
                  <span class="button__content">
                    Enviar e solicitar demo
                    <img src="/icons/send-white.svg" alt="" class="button__icon" />
                  </span>
                }
              </button>
            </form>
          }
        </div>
      </div>
    </div>
  </div>
</section>

@if (toast().show) {
  <div class="toast">
    <div class="toast__content stack stack--xs">
      <p class="toast__title">{{ toast().title }}</p>
      <p class="toast__description">{{ toast().description }}</p>
    </div>
  </div>
}
